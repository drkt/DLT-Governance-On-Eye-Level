@startuml
skinparam componentStyle rectangle

package "DLT Infrastructure" {
  [TelcoGovernance.sol] <<SmartContract>>
  [AuditLog.sol] <<Library>>
  [IdentityRegistry.sol] <<SmartContract>>
  [DLT Ledger] <<DistributedLedgerNode>>
}

package "Telco Participants (Equal Peers)" {
  [Governance Gateway]
  [Validator Node]
  [MPC Key Storage]
}

package "Independent Auditor" {
  [Audit Authority]
}

actor "New Member" as Partner
actor "Validator"
actor "Onboarded User" as Reader

' --- Governance & Membership ---
Partner --> [Governance Gateway] : requestOnboarding(DID, x509)
[Governance Gateway] --> [TelcoGovernance.sol] : submitRequest()
Validator --> [TelcoGovernance.sol] : approve(), reject(), offboard()
[TelcoGovernance.sol] --> [AuditLog.sol] : logAudit()
[AuditLog.sol] --> [DLT Ledger] : recordLog()

' --- Identity Management ---
[TelcoGovernance.sol] <|-- [IdentityRegistry.sol]
[IdentityRegistry.sol] --> [DLT Ledger] : store DID/x509

' Self-sovereign write action
Partner --> [IdentityRegistry.sol] : registerIdentity(did, x509)
note right of Partner
  Member generates DID/x.509 locally
  Writes to ledger after onboarding
end note

Reader --> [IdentityRegistry.sol] : readDID(), readX509()
note right of Reader
  Access only if status == Onboarded
end note

' --- Supporting Infrastructure ---
[TelcoGovernance.sol] --> [MPC Key Storage] : optional key handling
[TelcoGovernance.sol] --> [Audit Authority] : emit audit events
[Audit Authority] --> [DLT Ledger] : publish audit results

note right of [TelcoGovernance.sol]
  - Decentralized validator consensus
  - No owner, no central control
end note
@enduml